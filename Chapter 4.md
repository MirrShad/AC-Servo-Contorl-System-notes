# 第四章 电压空间矢量PWM
## 4.1 电压空间矢量PWM控制技术
    SVPWM技术和原来的技术比较，绕组电流波形谐波成分小，转矩脉冲降低，旋转磁场更接近圆形，更容易数字化
### 4.1.1 空间矢量的定义
    空间中的电压，电流和磁链是三相电压，电流和磁链的矢量和
### 4.1.2 电压与磁链空间矢量的关系
    结合图4-1我们能得出公式 
$$U_{s}=R_{s} I_{s}+ \frac{d\Psi_s}{dt}$$
    在转速不低的情况下
$$U_{s} \approx \frac{d\Psi_s}{dt}$$
根据磁链原本的公式我们可以得到
$$\Psi_s=\psi_se^{j(\omega_1t+\theta)}$$
$\theta$应该是初始角度，将原本的公式代入
$$U_{s} \approx \frac{d}{dt}(\psi_se^{j(\omega_1t+\theta)})=j\omega_1\psi_se^{j(\omega_1t+\theta)}=\omega_1\psi_se^{j(\omega_1t+\frac\pi 2+\theta)}$$
然后代入$U_s=u_se^{j(w_1t+\theta)}$代入
$$\omega_1\psi_se^{j(\omega_1t+\frac\pi 2+\theta)}=u_se^{j(w_1t+\theta)}$$
我们可以得到$\psi_s$等于电压幅值和角频率之比$\frac{u_s}{\omega_1}$，电压和磁链方向垂直，所以旋转磁场的问题能转化为电压空间矢量的问题
### 4.1.3 PWM逆变器基本输出电压矢量
    介绍了三相排列组合出来的所有情况对应的角度
### 4.1.4 正六边形空间旋转磁场
    根据上面的得到的旋转磁场问题能转化为电压空间矢量的问题以及正六边形的相关性质，我们可以得出
将$|\Delta\Psi_s(k)|$视为$|U(k)|\Delta t$问题，然后
$$|U(k)|\Delta t= U_d \Delta t=\frac{U_d \pi}{3 \omega_1}$$
然后我们可以看到为了保持定子磁链值恒定我们要$\frac{U_d}{\omega_1}$的值恒定。当我们需要提速或者减速会要求$\omega_1$改变的场合，我们还需要相应地改变$U_d$，这会使得控制变得十分复杂。所以我们引入了零矢量，零矢量的时候是没有磁链在作用的，有效的工作矢量作用时间仅为$\Delta t_1$，零矢量工作时间为剩下的$\Delta t_0 = \Delta t - \Delta t_1$。这样，虽然速度改变，导致$\Delta t$改变，但是我们可以通过减少零向量工作时间，来保持有效工作时间$\Delta t_1$不变，从而保持磁链值恒定
### 4.1.5 期望电压空间矢量的合成和实现
1. 期望电压空间矢量的合成  
    每个有效工作矢量在一个周期内只能工作一次的话，只能生成正六边形的旋转磁场，可是我们需要圆形旋转磁场，就需要通过空间矢量的平行四边形法则来合成期望的输出矢量
2. 期望电压空间矢量的实现
        主要要解决三个问题，第一，电压矢量作用时间。第二，两个相邻的非零矢量和零矢量在时间上的组合。第三，判断电压矢量旋转到某个区域，即扇区的判断
## 4.2 SVPWM三个关键问题的解决
1. 基本电压矢量作用时间的计算，由下面二式
$$U_s=\frac{T_1}{T}U_1+\frac{T_2}{T}U_2=\frac{T_1}{T}U_d+\frac{T_2}{T}U_de^{j\frac{\pi}{3}}=\frac{T_1}{T}U_d+\frac{T_2}{T}U_dcos\frac{\pi}{3}+j\frac{T_2}{T}U_dsin\frac{\pi}{3}$$
$$U_s=u_scos\theta+ju_ssin\theta$$
我们可以得到
$$u_scos\theta = \frac{T_1}{T}U_d+\frac{T_2}{T}U_dcos\frac{\pi}{3}$$
$$u_ssin\theta=\frac{T_2}{T}U_dsin\frac{\pi}{3}$$
经过转换，我们可以得到$T_1T_2$的表达式
$$T_1=\frac{2u_s}{\sqrt{3}U_d}sin\theta$$
$$T_2=\frac{2u_sT}{\sqrt{3}U_d}sin\theta$$
2. 基本电压矢量作用顺序  
(1)7段式SVPWM
主要是由于有切换损失，所以要改变到$U_1(100)$、$U_3(010)$、$U_5(001)$需要从$U_0(000)$，改变到$U_2(110)$、$U_4(011)$、$U_6(101)$需要从$U_7(111)$。所以在不同象限，我们可以通过如表4-3来控制
(2)5段式SVPWM
3. 合成电压矢量所处扇区的判断  
直接求角度得到合成矢量所在扇区
